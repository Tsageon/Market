{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import axios from'axios';export const fetchItems=createAsyncThunk('items/fetchItems',async()=>{const response=await axios.get('https://backendma-2.onrender.com/api/getItems');return response.data.data;});export const addItem=createAsyncThunk('items/addItem',async item=>{const response=await axios.post('https://backendma-2.onrender.com/api/addItem',item);return{...item,id:response.data.id};});export const updateItem=createAsyncThunk('items/updateItem',async item=>{await axios.put(`https://backendma-2.onrender.com/api/updateItem`,item);return item;});export const deleteItem=createAsyncThunk('items/deleteItem',async id=>{await axios.delete(`https://backendma-2.onrender.com/api/deleteItem/${id}`);return id;});const itemsSlice=createSlice({name:'items',initialState:{items:[],filteredItems:[],status:'idle',error:null},reducers:{filterItems:(state,action)=>{const filterType=action.payload;if(filterType==='all'){state.filteredItems=state.items;}else{state.filteredItems=state.items.filter(item=>{switch(filterType){case'type':return item.type;case'availability':return item.availability;case'stockLeft':return item.stockLeft>0;case'name':return item.name.toLowerCase().includes('your-search-term');default:return true;}});}}},extraReducers:builder=>{builder.addCase(fetchItems.pending,state=>{state.status='loading';}).addCase(fetchItems.fulfilled,(state,action)=>{state.status='succeeded';state.items=action.payload;state.filteredItems=action.payload;}).addCase(fetchItems.rejected,(state,action)=>{state.status='failed';state.error=action.error.message;}).addCase(addItem.fulfilled,(state,action)=>{state.items.push(action.payload);state.filteredItems.push(action.payload);}).addCase(updateItem.fulfilled,(state,action)=>{const index=state.items.findIndex(item=>item.id===action.payload.id);if(index!==-1){state.items[index]=action.payload;const filteredIndex=state.filteredItems.findIndex(item=>item.id===action.payload.id);if(filteredIndex!==-1){state.filteredItems[filteredIndex]=action.payload;}}}).addCase(deleteItem.fulfilled,(state,action)=>{state.items=state.items.filter(item=>item.id!==action.payload);});}});export const{filterItems}=itemsSlice.actions;export default itemsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","fetchItems","response","get","data","addItem","item","post","id","updateItem","put","deleteItem","delete","itemsSlice","name","initialState","items","filteredItems","status","error","reducers","filterItems","state","action","filterType","payload","filter","type","availability","stockLeft","toLowerCase","includes","extraReducers","builder","addCase","pending","fulfilled","rejected","message","push","index","findIndex","filteredIndex","actions","reducer"],"sources":["C:/Users/Administrator/Desktop/marrket/src/Redux/itemSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\nexport const fetchItems = createAsyncThunk('items/fetchItems', async () => {\r\n  const response = await axios.get('https://backendma-2.onrender.com/api/getItems');\r\n  return response.data.data; \r\n});\r\n\r\nexport const addItem = createAsyncThunk('items/addItem', async (item) => {\r\n  const response = await axios.post('https://backendma-2.onrender.com/api/addItem', item);\r\n  return { ...item, id: response.data.id }; \r\n});\r\n\r\nexport const updateItem = createAsyncThunk('items/updateItem', async (item) => {\r\n  await axios.put(`https://backendma-2.onrender.com/api/updateItem`, item);\r\n  return item;\r\n});\r\n\r\nexport const deleteItem = createAsyncThunk('items/deleteItem', async (id) => {\r\n  await axios.delete(`https://backendma-2.onrender.com/api/deleteItem/${id}`);\r\n  return id;\r\n});\r\n\r\n\r\nconst itemsSlice = createSlice({\r\n  name: 'items',\r\n  initialState: {\r\n    items: [],\r\n    filteredItems: [],\r\n    status: 'idle',\r\n    error: null,\r\n  },\r\n  reducers: {   filterItems: (state, action) => {\r\n    const filterType = action.payload;\r\n    if (filterType === 'all') {\r\n      state.filteredItems = state.items; \r\n    } else {\r\n      state.filteredItems = state.items.filter(item => {\r\n        switch (filterType) {\r\n          case 'type':\r\n            return item.type;\r\n          case 'availability':\r\n            return item.availability; \r\n          case 'stockLeft':\r\n            return item.stockLeft > 0;\r\n          case 'name':\r\n            return item.name.toLowerCase().includes('your-search-term'); \r\n          default:\r\n            return true;\r\n        }\r\n      });\r\n    }\r\n  }\r\n},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(fetchItems.pending, (state) => {\r\n        state.status = 'loading';\r\n      })\r\n      .addCase(fetchItems.fulfilled, (state, action) => {\r\n        state.status = 'succeeded';\r\n        state.items = action.payload;\r\n        state.filteredItems = action.payload; \r\n      })\r\n      .addCase(fetchItems.rejected, (state, action) => {\r\n        state.status = 'failed';\r\n        state.error = action.error.message;\r\n      })\r\n     \r\n      .addCase(addItem.fulfilled, (state, action) => {\r\n        state.items.push(action.payload);\r\n        state.filteredItems.push(action.payload); \r\n      })\r\n     \r\n      .addCase(updateItem.fulfilled, (state, action) => {\r\n        const index = state.items.findIndex(item => item.id === action.payload.id);\r\n        if (index !== -1) {\r\n          state.items[index] = action.payload;\r\n          const filteredIndex = state.filteredItems.findIndex(item => item.id === action.payload.id);\r\n          if (filteredIndex !== -1) {\r\n            state.filteredItems[filteredIndex] = action.payload;\r\n          }\r\n        }\r\n      })\r\n      .addCase(deleteItem.fulfilled, (state, action) => {\r\n        state.items = state.items.filter(item => item.id !== action.payload);\r\n      });\r\n  },\r\n});\r\n\r\nexport const { filterItems } = itemsSlice.actions;\r\nexport default itemsSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}