{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import{selectUser}from'../Redux/authSlice';import{useNavigate}from'react-router';import{fetchItems,addItem,updateItem,deleteItem}from'../Redux/itemSlice';import'./Admin.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Admin=()=>{const dispatch=useDispatch();const navigate=useNavigate();const items=useSelector(state=>state.items.filteredItems);const status=useSelector(state=>state.items.status);const[isAdmin]=useState(false);const[newItem,setNewItem]=useState({name:'',type:'',availability:true,stockLeft:0});const[editItem,setEditItem]=useState(null);useEffect(()=>{dispatch(fetchItems());},[dispatch]);const user=useSelector(selectUser);if(!user||user.role!=='admin'){return navigate('/');}const handleAddItem=()=>{dispatch(addItem(newItem));setNewItem({name:'',type:'',availability:true,stockLeft:0});};const handleUpdateItem=()=>{if(editItem){dispatch(updateItem(editItem));setEditItem(null);}};const handleDeleteItem=id=>{dispatch(deleteItem(id));};const handleHideItem=item=>{const updatedItem={...item,hidden:!item.hidden};dispatch(updateItem(updatedItem));};const renderItems=()=>{if(status==='loading'){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});}return items.map(item=>/*#__PURE__*/_jsxs(\"div\",{style:{display:item.hidden?'none':'block'},children:[/*#__PURE__*/_jsx(\"h3\",{children:item.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Type: \",item.type]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Availability: \",item.availability?'Available':'Unavailable']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Stock Left: \",item.stockLeft]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleHideItem(item),children:\"Hide\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditItem(item),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteItem(item.id),children:\"Delete\"})]},item.id));};return/*#__PURE__*/_jsxs(\"div\",{children:[isAdmin?/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome, Admin!\"}):/*#__PURE__*/_jsx(\"h1\",{children:\"Access Denied,Not happening,get out of here\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Admin Panel\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add Item\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",value:newItem.name,onChange:e=>setNewItem({...newItem,name:e.target.value})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Type\",value:newItem.type,onChange:e=>setNewItem({...newItem,type:e.target.value})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Stock Left\",value:newItem.stockLeft,onChange:e=>setNewItem({...newItem,stockLeft:parseInt(e.target.value)})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddItem,children:\"Add\"})]}),editItem&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Item\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editItem.name,onChange:e=>setEditItem({...editItem,name:e.target.value})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editItem.type,onChange:e=>setEditItem({...editItem,type:e.target.value})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:editItem.stockLeft,onChange:e=>setEditItem({...editItem,stockLeft:parseInt(e.target.value)})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpdateItem,children:\"Update\"})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Items\"}),renderItems()]});};export default Admin;","map":{"version":3,"names":["React","useEffect","useState","useSelector","useDispatch","selectUser","useNavigate","fetchItems","addItem","updateItem","deleteItem","jsx","_jsx","jsxs","_jsxs","Admin","dispatch","navigate","items","state","filteredItems","status","isAdmin","newItem","setNewItem","name","type","availability","stockLeft","editItem","setEditItem","user","role","handleAddItem","handleUpdateItem","handleDeleteItem","id","handleHideItem","item","updatedItem","hidden","renderItems","children","map","style","display","onClick","placeholder","value","onChange","e","target","parseInt"],"sources":["C:/Users/Administrator/Desktop/marrket/src/Components/Admin.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { selectUser } from '../Redux/authSlice';\r\nimport { useNavigate } from 'react-router';\r\nimport { fetchItems, addItem, updateItem, deleteItem} from '../Redux/itemSlice';\r\nimport './Admin.css'\r\n\r\nconst Admin = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const items = useSelector(state => state.items.filteredItems);\r\n  const status = useSelector(state => state.items.status);\r\n  const [isAdmin] = useState(false);\r\n  const [newItem, setNewItem] = useState({ name: '', type: '', availability: true, stockLeft: 0 });\r\n  const [editItem, setEditItem] = useState(null);\r\n\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchItems());\r\n  }, [dispatch]);\r\n\r\n    const user = useSelector(selectUser);\r\n    if (!user || user.role !== 'admin') {\r\n      return navigate('/'); \r\n    }\r\n\r\n\r\n  const handleAddItem = () => {\r\n    dispatch(addItem(newItem));\r\n    setNewItem({ name: '', type: '', availability: true, stockLeft: 0 });\r\n  };\r\n\r\n  const handleUpdateItem = () => {\r\n    if (editItem) {\r\n      dispatch(updateItem(editItem));\r\n      setEditItem(null);\r\n    }\r\n  };\r\n\r\n  const handleDeleteItem = (id) => {\r\n    dispatch(deleteItem(id));\r\n  };\r\n\r\n  const handleHideItem = (item) => {\r\n    const updatedItem = { ...item, hidden: !item.hidden };\r\n    dispatch(updateItem(updatedItem));\r\n  };\r\n\r\n  const renderItems = () => {\r\n    if (status === 'loading') {\r\n      return <p>Loading...</p>;\r\n    }\r\n\r\n    return items.map(item => (\r\n      <div key={item.id} style={{ display: item.hidden ? 'none' : 'block' }}>\r\n        <h3>{item.name}</h3>\r\n        <p>Type: {item.type}</p>\r\n        <p>Availability: {item.availability ? 'Available' : 'Unavailable'}</p>\r\n        <p>Stock Left: {item.stockLeft}</p>\r\n        <button onClick={() => handleHideItem(item)}>Hide</button>\r\n        <button onClick={() => setEditItem(item)}>Edit</button>\r\n        <button onClick={() => handleDeleteItem(item.id)}>Delete</button>\r\n      </div>\r\n    ));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n         {isAdmin ? (\r\n        <h1>Welcome, Admin!</h1>\r\n      ) : (\r\n        <h1>Access Denied,Not happening,get out of here</h1>\r\n      )}\r\n      <h1>Admin Panel</h1>\r\n      <div>\r\n        <h2>Add Item</h2>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Name\"\r\n          value={newItem.name}\r\n          onChange={(e) => setNewItem({ ...newItem, name: e.target.value })}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Type\"\r\n          value={newItem.type}\r\n          onChange={(e) => setNewItem({ ...newItem, type: e.target.value })}\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          placeholder=\"Stock Left\"\r\n          value={newItem.stockLeft}\r\n          onChange={(e) => setNewItem({ ...newItem, stockLeft: parseInt(e.target.value) })}\r\n        />\r\n        <button onClick={handleAddItem}>Add</button>\r\n      </div>\r\n\r\n      {editItem && (\r\n        <div>\r\n          <h2>Edit Item</h2>\r\n          <input\r\n            type=\"text\"\r\n            value={editItem.name}\r\n            onChange={(e) => setEditItem({ ...editItem, name: e.target.value })}\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            value={editItem.type}\r\n            onChange={(e) => setEditItem({ ...editItem, type: e.target.value })}\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            value={editItem.stockLeft}\r\n            onChange={(e) => setEditItem({ ...editItem, stockLeft: parseInt(e.target.value) })}\r\n          />\r\n          <button onClick={handleUpdateItem}>Update</button>\r\n        </div>\r\n      )}\r\n\r\n      <h2>Items</h2>\r\n      {renderItems()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Admin;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}